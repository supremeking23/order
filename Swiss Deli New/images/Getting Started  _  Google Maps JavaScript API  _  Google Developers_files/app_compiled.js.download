for(var g="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this,aa="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(c.get||c.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},ba=function(){ba=function(){};g.Symbol||(g.Symbol=ca)},da=0,ca=function(a){return"jscomp_symbol_"+(a||"")+da++},h=function(){ba();var a=g.Symbol.iterator;a||(a=g.Symbol.iterator=
g.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&aa(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return ea(this)}});h=function(){}},ea=function(a){var b=0;return fa(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})},fa=function(a){h();a={next:a};a[g.Symbol.iterator]=function(){return this};return a},ga=function(a,b){h();a instanceof String&&(a+="");var c=0,d={next:function(){if(c<a.length){var e=c++;return{value:b(e,a[e]),done:!1}}d.next=function(){return{done:!0,
value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d},m=g,n=["Array","prototype","keys"],p=0;p<n.length-1;p++){var q=n[p];q in m||(m[q]={});m=m[q]}var ha=n[n.length-1],r=m[ha],t=r?r:function(){return ga(this,function(a){return a})};t!=r&&null!=t&&aa(m,ha,{configurable:!0,writable:!0,value:t});
var ia=this,u=function(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b},v=function(a){return"array"==u(a)},w=function(a){return"string"==typeof a},x=function(a,b){a=a.split(".");var c=ia;a[0]in c||!c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)a.length||void 0===b?c=c[d]?c[d]:c[d]={}:c[d]=b},y=function(a,b){function c(){}c.prototype=b.prototype;a.Ba=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.wa=function(a,c,l){for(var d=Array(arguments.length-2),e=2;e<
arguments.length;e++)d[e-2]=arguments[e];return b.prototype[c].apply(a,d)}};var ja=angular.module("henhouse.templates",[]).value("forceCachedTemplates",!1).value("forceUncachedTemplates",!1).factory("html2JsTemplatesCached",["forceCachedTemplates","forceUncachedTemplates",function(a,b){return function(){return!b&&!0}}]).run(["$templateCache","html2JsTemplatesCached",function(a,b){function c(a){return a.replace(/\"/g,"&quot;").replace(/\'/g,"&apos;")}b()&&(a.put("components/api_key_bar/api-key-bar.html",'<div class="api-key-bar" layout="row" layout-align="center center">\n    <div ng-if="::$ctrl.showApiKeyName" class="api-key-bar-display-name" flex="20">\n      {{::$ctrl.key.displayName}}\n    </div>\n    <div class="api-key-bar-api-key" data-test-api-key flex>\n      {{::$ctrl.key.currentKey}}\n    </div>\n    <md-button class="md-icon-button" ng-click="$ctrl.clickToCopyKey()">\n      <md-icon id="hen-copy-icon" class="md-accent md-hue-2">\n        content_copy\n      </md-icon>\n    </md-button>\n  </div>\n</div>\n'),
a.put("components/henhouse_flow/henhouse-flow.html",'  <div ng-if="$ctrl.step.id == \'INTRO\'">\n    <hen-header hen-title="{{$ctrl.getApiTitle()}}">\n      <hen-project-selector on-submit="$ctrl.setUpEnvironment()"></hen-project-selector>\n    </hen-header>\n    <div class="hen-project-page-content" ng-if="!$ctrl.userProbablyHasPermission">\n      <div layout="row" layout-align="center center">\n        <div class="hen-message-icon" flex>\n          <md-icon class="material-icons hen-error-icon">\n            warning\n          </md-icon>\n        </div>\n        <div class="hen-note" flex>\n          You don\'t have permission to manage APIs for this project.<br/> Create or select another project to continue.\n        </div>\n      </div>\n    </div>\n    <div class="hen-project-page-content" ng-if="$ctrl.isTosVisible()">\n      <hen-tos-opt-in is-accepted="$ctrl.tosAccepted"></hen-tos-opt-in>\n    </div>\n    <div class="hen-button-bar">\n      <div layout="row">\n        <div flex></div>\n        <div>\n          <md-button ng-click="$ctrl.cancel()">\n            Cancel\n          </md-button>\n          <md-button ng-click="$ctrl.setUpEnvironment()"\n                     class="md-primary"\n                     ng-disabled="!$ctrl.isValidForFlow()">\n            <span ng-if="$ctrl.projectSelectorDetails.state == \'NEW_PROJECT\'">\n            Create and Enable API\n            </span>\n            <span ng-if="$ctrl.projectSelectorDetails.state == \'EXISTING_PROJECT\'">\n            Enable API\n            </span>\n          </md-button>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div ng-if="$ctrl.step.id == \'LOADING\'">\n    <hen-header hen-title="{{$ctrl.getApiTitle()}}"></hen-header>\n    <div class="hen-loading-page-content" layout="column">\n      <div flex></div>\n        <div layout="row">\n          <div flex></div>\n            <md-progress-circular md-mode="indeterminate" md-diameter="60" ></md-progress-circular>\n          <div flex></div>\n        </div>\n      <div flex></div>\n    </div>\n  </div>\n  <div ng-if="$ctrl.step.id == \'SUCCESS\'">\n    <hen-success-page api-title="$ctrl.api.serviceConfig.title"></hen-success-page>\n  </div>\n  <div ng-if="$ctrl.step.id == \'ERROR\'">\n    <hen-header hen-subtitle="{{$ctrl.errorMessage.title}}" is-error="true"></hen-header>\n    <div class="hen-error-page-content">{{$ctrl.errorMessage.description}}</div>\n    <div class="hen-button-bar">\n      <div layout="row">\n        <div flex></div>\n        <div>\n          <md-button ng-click="$ctrl.cancel()" class="md-primary">\n            Close\n          </md-button>\n        </div>\n      </div>\n    </div>\n  </div>\n'),
a.put("components/henhouse_header/henhouse-header.html",'<md-toolbar class="hen-page-header" layout="row">\n  <div layout="column">\n    <h1 data-test-header-title class="hen-page-header-title md-accent md-subhead">\n      {{$ctrl.henTitle}}\n    </h1>\n    <span flex></span>\n    <h2 data-test-header-subtitle class="hen-page-header-sub-title md-display-1">\n      <md-icon class="hen-warning-icon" ng-if="$ctrl.isError">warning</md-icon>\n      {{$ctrl.henSubtitle}}\n    </h2>\n    <ng-transclude></ng-transclude>\n  </div>\n  <span flex></span>\n  <md-button class="md-icon-button md-accent hen-page-close-button"\n      ng-click="$ctrl.flowCtrl.cancel()">\n    <md-icon>\n      close\n    </md-icon>\n  </md-button>\n</md-toolbar>\n'),
a.put("components/project_selector/project-selector.html",'<md-select id="hen-project-select"\n           data-test-project-select\n           class="hen-project-selector md-accent"\n           md-container-class="hen-project-selector-container"\n           ng-model="$ctrl.projectSelectorDetails.projectId"\n           placeholder="'+c("Select or create project")+'"\n           ng-if="$ctrl.projectSelectorDetails.state == \'EXISTING_PROJECT\'"\n           ng-change="$ctrl.handleProjectChange()">\n  <md-option class="hen-project-selector-option"\n             ng-repeat="project in $ctrl.projects"\n             value="{{project.projectId}}">\n    {{project.name}}\n  </md-option>\n  <md-divider></md-divider>\n  <md-option class="hen-project-selector-option" ng-value="$ctrl.NEW_PROJECT_ID">\n    <span class="hen-project-selector-create-project">\n      + Create a new project\n    </span>\n  </md-option>\n</md-select>\n<md-input-container class="hen-project-create"\n    ng-if="$ctrl.projectSelectorDetails.state == \'NEW_PROJECT\'">\n  <form ng-submit="$ctrl.onSubmit()">\n    <label id="hen-project-create-label">\n      Enter new project name\n    </label>\n    <input\n        id="hen-project-create-input"\n        data-test-project-create-input\n        ng-model="$ctrl.projectSelectorDetails.createProjectLabel">\n  </form>\n</md-input-container>\n'),
a.put("components/success_page/success-page.html",'<hen-header hen-subtitle="'+c("You're all set!")+'">\n</hen-header>\n<div class="hen-success-page-content">\n  <div class="hen-success-page-content-main-text">\n    {{$ctrl.getApiConfirmationText()}}\n  </div>\n  <div class="api-key-bar-heading">\n    YOUR API KEY\n  </div>\n  <api-key-bar key="$ctrl.apiKey" show-api-key-name="false"></api-key-bar>\n  <div layout="row" layout-align="center center">\n    <div class=\'hen-message-icon\' flex>\n      <md-icon class="material-icons hen-info-icon">\n        info_outline\n      </md-icon>\n    </div>\n    <div class="hen-note" flex>\n      To improve your app\'s security, restrict this key\'s usage in the <a ng-href="{{::$ctrl.credentialLink}}" target="_blank">API Console</a>.\n    </div>\n  </div>\n</div>\n<div class="hen-success-page-footer" layout="column">\n  <div class="hen-success-page-footer-heading">\n    Resources\n  </div>\n  <div class="hen-success-page-footer-content" layout="row">\n    <div>\n      <md-icon class="hen-success-page-footer-icon md-accent md-hue-2">\n        description\n      </md-icon>\n    </div>\n    <div>\n      <div class="hen-success-page-footer-content-heading">\n        Getting started\n      </div>\n      <div class="hen-success-page-footer-content-text">\n        Documentation to get you going\n      </div>\n      <md-button\n          class="hen-success-page-footer-content-link hen-success-page-blue-link\n                 hen-success-page-footer-docs-link"\n          target="{{::$ctrl.docsTarget}}"\n          ng-href="{{::$ctrl.docsUrl}}"\n          ng-click="$ctrl.handleDocsClick()">\n        Go to docs\n      </md-button>\n    </div>\n    <span flex></span>\n    <div>\n      <md-icon class="hen-success-page-footer-icon md-accent md-hue-2">\n        build\n      </md-icon>\n    </div>\n    <div>\n      <div class="hen-success-page-footer-content-heading">\n        API Console</div>\n      <div class="hen-success-page-footer-content-text">\n        Manage credentials and APIs\n      </div>\n      <md-button\n          class="hen-success-page-footer-content-link\n                 hen-success-page-blue-link\n                 hen-success-page-footer-help-link"\n          target="_blank"\n          ng-href="{{::$ctrl.consoleLink}}">\n        Go to console\n      </md-button>\n    </div>\n  </div>\n</div>\n'),
a.put("components/tos_opt_in/tos-opt-in.html",'<div class="hen-opt-in-text">\n  I agree that my use of any <a href="https://console.developers.google.com/terms" target="_blank"> services and related APIs</a> is subject to compliance with the applicable <a href="https://console.developers.google.com/terms" target="_blank">Terms of Service</a>. \n</div>\n<md-radio-group ng-model="$ctrl.isAccepted" class="md-primary">\n  <md-radio-button ng-value="$ctrl.OptInStatus.ACCEPTED" data-test-accept-tos>\n    Yes\n  </md-radio-button>\n  <md-radio-button ng-value="$ctrl.OptInStatus.DECLINED">\n    No\n  </md-radio-button>\n</md-radio-group>\n'))}]);var z=function(a,b,c){this.l=a;this.ha=b;this.o=c;this.P=c.document};z.prototype.clickToCopyKey=function(){var a=this.ha[0].querySelector(".api-key-bar-api-key");this.o.getSelection().removeAllRanges();var b=this.P.createRange();b.selectNodeContents(a);this.o.getSelection().addRange(b);this.P.execCommand("copy");this.o.getSelection().removeAllRanges();A(this.l,"ClickToCopy")};z.$inject=["analytics","$element","$window"];
var ka={templateUrl:"components/api_key_bar/api-key-bar.html",bindings:{key:"<",showApiKeyName:"<"},controller:z};var B=function(a){if(Error.captureStackTrace)Error.captureStackTrace(this,B);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))};y(B,Error);B.prototype.name="CustomError";var la=function(a,b){for(var c=a.split("%s"),d="",e=Array.prototype.slice.call(arguments,1);e.length&&1<c.length;)d+=c.shift()+e.shift();return d+c.join("%s")};var C=function(a,b){b.unshift(a);B.call(this,la.apply(null,b));b.shift()};y(C,B);C.prototype.name="AssertionError";
var D=function(a,b,c,d){var e="Assertion failed";if(c)var e=e+(": "+c),l=d;else a&&(e+=": "+a,l=b);throw new C(""+e,l||[]);},E=function(a,b,c){a||D("",null,b,Array.prototype.slice.call(arguments,2));return a},F=function(a,b){throw new C("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1));},ma=function(a,b,c){w(a)||D("Expected string but got %s: %s.",[u(a),a],b,Array.prototype.slice.call(arguments,2));return a},na=function(a,b,c){v(a)||D("Expected array but got %s: %s.",[u(a),a],b,Array.prototype.slice.call(arguments,
2));return a};var oa=Array.prototype.indexOf?function(a,b,c){E(null!=a.length);return Array.prototype.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(w(a))return w(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},pa=Array.prototype.map?function(a,b,c){E(null!=a.length);return Array.prototype.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),l=w(a)?a.split(""):a,k=0;k<d;k++)k in l&&(e[k]=b.call(c,l[k],k,a));return e},qa=function(a){return Array.prototype.concat.apply(Array.prototype,
arguments)};var sa=function(a){var b=ra,c;for(c in b)if(!a.call(void 0,b[c],c,b))return!1;return!0},ua=function(){var a=ta,b=[],c=0,d;for(d in a)b[c++]=a[d];return b},wa=function(a){var b=va;a:{for(var c in b)if(a.call(void 0,b[c],c,b)){a=c;break a}a=void 0}return a&&b[a]},G=function(a){var b=arguments.length;if(1==b&&v(arguments[0]))return G.apply(null,arguments[0]);for(var c={},d=0;d<b;d++)c[arguments[d]]=!0;return c};var H=function(){},xa="function"==typeof Uint8Array,ya=function(a,b,c){a.g=null;b||(b=[]);a.Aa=void 0;a.C=-1;a.h=b;a:{if(a.h.length){b=a.h.length-1;var d=a.h[b];if(d&&"object"==typeof d&&!v(d)&&!(xa&&d instanceof Uint8Array)){a.F=b-a.C;a.i=d;break a}}a.F=Number.MAX_VALUE}a.xa={};if(c)for(b=0;b<c.length;b++)d=c[b],d<a.F?(d+=a.C,a.h[d]=a.h[d]||I):a.i[d]=a.i[d]||I},I=Object.freeze?Object.freeze([]):[],J=function(a,b){if(b<a.F){b+=a.C;var c=a.h[b];return c===I?a.h[b]=[]:c}c=a.i[b];return c===I?a.i[b]=
[]:c},K=function(a,b,c){a=J(a,b);return null==a?c:a},L=function(a,b,c){b<a.F?a.h[b+a.C]=c:a.i[b]=c},Aa=function(a){if(a.g)for(var b in a.g){var c=a.g[b];if(v(c))for(var d=0;d<c.length;d++)c[d]&&za(c[d]);else c&&za(c)}},za=function(a){Aa(a);return a.h};H.prototype.toString=function(){Aa(this);return this.h.toString()};
H.prototype.getExtension=function(a){if(this.i){this.g||(this.g={});var b=a.ya;if(a.za){if(a.ia())return this.g[b]||(this.g[b]=pa(this.i[b]||[],function(b){return new a.ga(b)})),this.g[b]}else if(a.ia())return!this.g[b]&&this.i[b]&&(this.g[b]=new a.ga(this.i[b])),this.g[b];return this.i[b]}};H.prototype.clone=function(){return new this.constructor(Ba(za(this)))};
var Ba=function(a){var b;if(v(a)){for(var c=Array(a.length),d=0;d<a.length;d++)null!=(b=a[d])&&(c[d]="object"==typeof b?Ba(b):b);return c}if(xa&&a instanceof Uint8Array)return new Uint8Array(a);c={};for(d in a)null!=(b=a[d])&&(c[d]="object"==typeof b?Ba(b):b);return c};var Ca=function(a){ya(this,a,null)};y(Ca,H);var Da=function(a){var b=new Ca;L(b,1,a);return b};Ca.prototype.setApiKey=function(a){L(this,4,a);return this};var Fa=function(a){ya(this,a,Ea)};y(Fa,H);var Ea=[4,7];var Ga=function(a,b,c,d,e){E(0<a,"Initial value must be greater than zero.");E(b>=a,"Max value should be at least as large as initial value.");void 0!==c&&E(0<=c&&1>=c,"Randomness factor should be between 0 and 1.");void 0!==d&&E(1<d,"Backoff factor should be greater than 1");void 0!==e&&E(1<=e,"Decay factor should be greater than 1");this.R=a;this.T=b;this.w=this.H=a;this.W=c||0;this.da=d||2};Ga.prototype.reset=function(){this.w=this.H=this.R};
var Ha=function(a){a.w=Math.min(a.T,a.w*a.da);a.H=Math.min(a.T,a.w+(a.W?Math.round(a.W*(Math.random()-.5)*2*a.w):0))};var Ia=/#|$/;var Ka=function(a){this.s=a},A=function(a,b){M(a.s,["analytics","event",b])};Ka.$inject=["embeddingPage"];var La=function(a,b,c,d){this.c=a;this.ma=b;this.f=c;this.b={root:E(J(d,1))}},Ma=function(a,b){return a.f.request({path:"/v1/services/"+encodeURIComponent(b)},a.b)},Oa=function(a,b,c){return a.f.request({path:"/v1/services:activate",method:"POST",body:{consumerProjectId:c,serviceNames:b}},a.b).then(function(b){var c=new Ga(1E3,1E4,.5,1.5);return Na(a,b,c)})},Na=function(a,b,c){if(b.error)return a.c.reject(b);if(b.metadata&&b.metadata.persisted||b.done)return a.c.when(b);var d=c.H;Ha(c);return a.ma(function(){return a.f.request({path:"/v1/"+
b.name},a.b).then(function(b){return Na(a,b,c)})},d)};La.$inject=["$q","$timeout","gapiClient","backends"];var Pa={},N=Da("https://test-servicemanagement.sandbox.googleapis.com");L(N,2,"https://test-apikeys-googleapis.sandbox.google.com");L(N,3,"https://test-cloudresourcemanager.sandbox.googleapis.com");L(N,5,"https://test-tos-pa.sandbox.googleapis.com");Pa[0]=N.setApiKey("ANVavNKM_iFH3gTXsIAqHnGSrvwtic_FjHbe6hY");var O=Da("https://servicemanagement.googleapis.com");L(O,2,"https://apikeys.googleapis.com");L(O,3,"https://cloudresourcemanager.googleapis.com");L(O,5,"https://tos-pa.googleapis.com");
var Qa=(Pa[1]=O.setApiKey("AIzaSyD-nhJADgF50b3VFd0BVfOPZqrEpuJQHxQ"),Pa),Ra=function(a){return Qa[K(a,3,1)]};Ra.$inject=["config"];var Sa=function(a){a=a.location.href;var b=a.search(Ia),c;b:{for(c=0;0<=(c=a.indexOf("pb",c))&&c<b;){var d=a.charCodeAt(c-1);if(38==d||63==d)if(d=a.charCodeAt(c+2),!d||61==d||38==d||35==d)break b;c+=3}c=-1}if(0>c)a=null;else{d=a.indexOf("&",c);if(0>d||d>b)d=b;c+=3;a=decodeURIComponent(a.substr(c,d-c).replace(/\+/g," "))}if(!a)throw Error("Required pb parameter");try{var e=na(JSON.parse(a));return new Fa(e)}catch(l){throw Error("Invalid pb parameter: '"+a+"'");}};Sa.$inject=["$window"];var Ta=["https://devsite.googleplex.com","https://developers.google.com"],Ua=function(a,b){this.o=a;this.b=b;this.M="";a=J(this.b,5);0<=oa(Ta,a)?this.M=J(this.b,5):console.error("Henhouse widget is not whitelisted for this origin: "+J(this.b,5))},M=function(a,b){b=[K(a.b,1,"")].concat(b);a.M&&a.o.parent.postMessage(b,a.M)},Va=function(a,b,c,d){d&&void 0!=d.X&&(b+="_"+(d.X?"TOS":"NO_TOS"));M(a,["loaded",c,600,b])};Ua.$inject=["$window","config"];var Wa=function(a){(J(a,6)||"").split(",").map(function(a){return wa(function(b){return b==a})}).filter(function(a){return void 0!=a})};Wa.$inject=["config"];var va={ra:"EXISTING_KEYS",sa:"IAM"};var Q=function(a,b,c,d){this.c=a;this.la=b;this.o=c;this.ca=J(d,4)};Q.prototype.request=function(a,b){return Xa(this).then(function(){return Ya(a,b)})};
var Ya=function(a,b){return gapi.client.request({root:b.root,path:a.path,params:a.params||{},method:a.method||"GET",body:JSON.stringify(a.body||"")}).then(function(a){return a.result})},Xa=function(a){if(!a.I){a.I=a.c.defer();a.o.onGapiClientLoaded=a.ka.bind(a);var b=document.createElement("script");b.src="https://apis.google.com/js/client.js?onload=onGapiClientLoaded";document.body.appendChild(b)}return a.I.promise};
Q.prototype.ka=function(){gapi.config.update("googleapis.config/auth/useFirstPartyAuth",!0);gapi.config.update("googleapis.config/auth/useFirstPartyAuthV2",!0);gapi.client.setApiKey(this.ca);this.I.resolve();this.la.$evalAsync()};Q.$inject=["$q","$rootScope","$window","backends"];var Za=function(a,b){this.f=a;this.b={root:E(J(b,2))}},ab=function(a,b){return a.f.request({path:"/v1/projects/"+encodeURIComponent(b)+"/apiKeys",method:"POST",body:{displayName:"API key"}},a.b)};Za.$inject=["gapiClient","backends"];var bb=function(a,b,c){this.c=a;this.f=b;this.b={root:E(J(c,5))}},cb=function(a,b){return a.f.request({path:"/v1/user/0/acceptances:batchInsert",method:"post",body:{tos_versions:b.map(function(a){return{tos_id:a.na,version:a.version}})}},a.b)},db=function(a){return a.serviceConfig&&a.serviceConfig.usage&&a.serviceConfig.usage.requirements?a.serviceConfig.usage.requirements.filter(function(a){return 0==a.lastIndexOf("serviceusage.googleapis.com/tos/",0)}).map(function(a){return a.substring(32)}):[]},
fb=function(a,b){b=eb.concat(db(b));return a.f.request({path:"/v1/user/0/required",params:{tos_ids:b}},a.b).then(function(a){return(a.missing||[]).map(function(a){return{na:a.tos.tosId,version:a.tos.version}})})};bb.$inject=["$q","gapiClient","backends"];var eb=["pantheon","cloud"];var gb=function(a,b,c){this.c=a;this.f=b;this.b={root:E(J(c,3))};this.V=this.f.request({path:"/v1beta1/projects"},this.b).then(function(a){return a.projects||[]}).then(function(a){return a.filter(function(a){return"ACTIVE"==a.lifecycleState})})},ib=function(a,b){return a.f.request({path:"v1beta1/projects",method:"POST",body:{name:b,projectId:hb(b)}},a.b)},jb=function(a,b){return a.f.request({path:"/v1beta1/projects/"+b+":testIamPermissions",method:"POST",body:{permissions:ua()}},a.b).then(function(a){return G(a.permissions)})},
hb=function(a){a=a.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9\-]/g,"");var b="-"+Date.now();30<(a+b).length&&(a=a.substr(0,30-b.length));return a+b};gb.$inject=["$q","gapiClient","backends"];var ta={pa:"servicemanagement.apiKeys.create",ta:"servicemanagement.apiKeys.list",ua:"servicemanagement.projectSettings.get",qa:"servicemanagement.services.bind"},ra=G(ua());var kb=function(a,b){this.c=a;this.v=b;this.G="";this.O="My Project";this.state="NOT_YET_SELECTED";this.U=a.when(ra)},lb=function(a){return"EXISTING_PROJECT"!=a.state||""==a.G?a.c.when(!0):a.U.then(function(a){return sa(function(b,d){return!!a[d]})})};
g.Object.defineProperties(kb.prototype,{projectId:{configurable:!0,enumerable:!0,get:function(){E("EXISTING_PROJECT"==this.state);return this.G},set:function(a){E("EXISTING_PROJECT"==this.state);this.G=a;this.U=jb(this.v,this.G)}},createProjectLabel:{configurable:!0,enumerable:!0,get:function(){E("NEW_PROJECT"==this.state);return this.O},set:function(a){E("NEW_PROJECT"==this.state);this.O=a}}});kb.$inject=["$q","projectService"];var mb=angular.module("henhouse.services.module",[]).service("apiService",La).service("analytics",Ka).service("credentialDetails",function(){this.fa="CREATE"}).service("embeddingPage",Ua).service("flagService",Wa).service("gapiClient",Q).service("keyService",Za).service("projectSelectorDetails",kb).service("projectService",gb).service("tosService",bb).factory("backends",Ra).factory("config",Sa);var nb=function(a,b){var c=this;this.projects=[];this.projectSelectorDetails=b;this.NEW_PROJECT_ID="-";this.v=a;this.v.V.then(function(a){0==a.length?c.projectSelectorDetails.state="NEW_PROJECT":(c.projectSelectorDetails.state="EXISTING_PROJECT",c.projects=a,c.projects.sort(function(a,b){return(a.name||"").localeCompare(b.name||"")}))})};nb.prototype.handleProjectChange=function(){this.projectSelectorDetails.projectId==this.NEW_PROJECT_ID&&(this.projectSelectorDetails.state="NEW_PROJECT")};
nb.$inject=["projectService","projectSelectorDetails"];var ob={controller:nb,bindings:{onSubmit:"&"},templateUrl:"components/project_selector/project-selector.html"};var pb={va:"UNRESPONDED",ACCEPTED:"ACCEPTED",DECLINED:"DECLINED"};var qb={id:"UNDEFINED",m:0},rb={id:"INTRO",m:225},sb={id:"LOADING",m:300},tb={id:"SUCCESS",m:580},ub={id:"ERROR",m:285},vb={title:"Couldn't create project",description:""},wb={title:"Something went wrong.",description:"Something went wrong. Please try again"},S=function(a,b,c,d,e,l,k,$a,Jb,P,Ja){var f=this;this.OptInStatus=pb;this.errorMessage=wb;this.step=qb;this.N=d;this.b=e;this.B=[];this.v=Jb;this.projectSelectorDetails=P;this.tosAccepted="UNRESPONDED";this.oa=Ja;this.c=a;this.ja=$a;this.D=l;
this.s=k;this.l=c;this.userProbablyHasPermission=!0;b.$watch(function(){return[P.state,"EXISTING_PROJECT"==P.state&&P.projectId]},function(){return xb(f)},!0);c=Ma(this.N,K(this.b,2,"")).then(function(a){return f.api=a}).then(function(a){return fb(Ja,a)}).then(function(a){return f.B=a});a.all([c,this.v.V]).then(function(){0==f.B.length&&(f.tosAccepted="ACCEPTED");R(f,rb);Va(k,"/henhouse/"+f.step.id,f.step.m,{X:f.isTosVisible()})}).catch(function(){R(f,ub);Va(k,"/henhouse/"+f.step.id,f.step.m)});b.$watch(function(){var a=
0;f.step==rb&&(f.isTosVisible()&&(a+=145),f.userProbablyHasPermission||(a=50));return f.step.m+a},function(a){M(k,["resize",a,600])})};S.prototype.getApiTitle=function(){return K(this.b,9,"")?K(this.b,9,""):this.api&&this.api.serviceConfig&&this.api.serviceConfig.title?"Enable "+this.api.serviceConfig.title:"Enable API"};
var yb=function(a){return 0==a.B.length?a.c.when({}):"ACCEPTED"!=a.tosAccepted?a.c.reject("Terms of Serivce must be explicitly accepted."):cb(a.oa,a.B).catch(function(){return T(a)})},zb=function(a){return"ACCEPTED"!=a.tosAccepted?a.c.reject("Terms of Serivce must be explicitly accepted."):ib(a.v,a.projectSelectorDetails.createProjectLabel).catch(function(){return T(a,vb)})},Ab=function(a,b){ma(b);return Oa(a.N,qa(K(a.b,2,""),J(a.b,7)),b).catch(function(){return T(a)})},Bb=function(a){switch(a.projectSelectorDetails.state){case "NEW_PROJECT":return A(a.l,
"StartCreateNewProject"),zb(a).then(function(b){a.projectSelectorDetails.state="EXISTING_PROJECT";return a.projectSelectorDetails.projectId=ma(b.projectId)});case "EXISTING_PROJECT":if(0==a.projectSelectorDetails.projectId.length)return a.c.reject("No project was selected");A(a.l,"UseExistingProject");return a.c.when(a.projectSelectorDetails.projectId);default:return a.c.reject("Cannot get project when the project selector is not yet initialized.")}};
S.prototype.isValidForFlow=function(){return this.userProbablyHasPermission&&this.tosAccepted==this.OptInStatus.ACCEPTED&&("EXISTING_PROJECT"==this.projectSelectorDetails.state&&""!=this.projectSelectorDetails.projectId||"NEW_PROJECT"==this.projectSelectorDetails.state&&""!=this.projectSelectorDetails.createProjectLabel)};
S.prototype.setUpEnvironment=function(){var a=this;if(this.isValidForFlow())switch(R(this,sb),this.D.fa){case "CREATE":yb(this).then(function(){return Bb(a)}).then(function(b){return a.c.all([Ab(a,b),ab(a.ja,b)])}).then(function(b){a.D.ea=b[1];R(a,tb)}).catch(function(){return T(a)})}};S.prototype.cancel=function(){M(this.s,["cancel"])};
var R=function(a,b){a.step=b;b=b.id;a.step==rb&&(b+="_"+(a.isTosVisible()?"TOS":"NO_TOS"));M(a.l.s,["analytics","virtualPageView","/henhouse/"+b])},T=function(a,b){a.step!=ub&&(a.errorMessage=b||wb,R(a,ub));return a.c.reject()};S.prototype.isTosVisible=function(){return 0<this.B.length};var xb=function(a){a.userProbablyHasPermission=!0;lb(a.projectSelectorDetails).then(function(b){a.userProbablyHasPermission=b})};S.$inject="$q $scope analytics apiService config credentialDetails embeddingPage keyService projectService projectSelectorDetails tosService".split(" ");
var Cb={controller:S,templateUrl:"components/henhouse_flow/henhouse-flow.html"};var U=function(){this.j="";this.aa=Db};U.prototype.u=!0;U.prototype.A=function(){return this.j};U.prototype.toString=function(){return"SafeUrl{"+this.j+"}"};var Eb=function(a){if(a instanceof U&&a.constructor===U&&a.aa===Db)return a.j;F("expected object of type SafeUrl, got '"+a+"' of type "+u(a));return"type_error:SafeUrl"},Fb=/^(?:(?:https?|mailto|ftp):|[^&:/?#]*(?:[/?#]|$))/i,Db={},Gb=function(a){var b=new U;b.j=a;return b};Gb("about:blank");var V=function(a,b,c,d,e){this.l=a;this.D=c;this.s=d;this.b=b;this.apiKey=this.D.ea;a=e.projectId.length?"?project="+e.projectId:"";this.consoleLink="https://console.developers.google.com"+a;this.S=!!J(b,8);b=J(b,8)||"";b instanceof U||(b=b.u?b.A():String(b),Fb.test(b)||(b="about:invalid#zClosurez"),b=Gb(b));this.docsUrl=Eb(b);this.docsTarget=this.S?"_blank":"_self";this.credentialLink="https://console.developers.google.com/apis/credentials"+(this.apiKey?"/key/"+this.apiKey.keyId:"")+a};
V.prototype.getApiConfirmationText=function(){return this.apiTitle&&!K(this.b,9,"")?"You're ready to start developing with "+(this.apiTitle+"!"):"You're ready to start developing!"};V.prototype.handleDocsClick=function(){A(this.l,"DocsLinkClick");this.S||M(this.s,["goto","docs"])};V.$inject=["analytics","config","credentialDetails","embeddingPage","projectSelectorDetails"];var Hb={controller:V,bindings:{apiTitle:"<"},templateUrl:"components/success_page/success-page.html"};var Ib=angular.module("henhouse.components.module",[mb.name]).component("apiKeyBar",ka).component("henSuccessPage",Hb).component("henFlow",Cb).component("henHeader",{bindings:{henSubtitle:"@",henTitle:"@",isError:"="},require:{flowCtrl:"^henFlow"},transclude:!0,templateUrl:"components/henhouse_header/henhouse-header.html"}).component("henProjectSelector",ob).component("henTosOptIn",{controller:function(){return{OptInStatus:pb}},bindings:{isAccepted:"="},templateUrl:"components/tos_opt_in/tos-opt-in.html"});var W=function(){this.K="";this.$=Kb};W.prototype.u=!0;var Kb={};W.prototype.A=function(){return this.K};W.prototype.toString=function(){return"SafeStyle{"+this.K+"}"};var Lb=function(a){if(a instanceof W&&a.constructor===W&&a.$===Kb)return a.K;F("expected object of type SafeStyle, got '"+a+"' of type "+u(a));return"type_error:SafeStyle"};var X=function(){this.L="";this.ba=Mb};X.prototype.u=!0;X.prototype.A=function(){return this.L};X.prototype.toString=function(){return"TrustedResourceUrl{"+this.L+"}"};var Nb=function(a){if(a instanceof X&&a.constructor===X&&a.ba===Mb)return a.L;F("expected object of type TrustedResourceUrl, got '"+a+"' of type "+u(a));return"type_error:TrustedResourceUrl"},Mb={};var Y=function(){this.j="";this.Y=Ob};Y.prototype.u=!0;Y.prototype.A=function(){return this.j};Y.prototype.toString=function(){return"SafeHtml{"+this.j+"}"};var Pb=function(a){if(a instanceof Y&&a.constructor===Y&&a.Y===Ob)return a.j;F("expected object of type SafeHtml, got '"+a+"' of type "+u(a));return"type_error:SafeHtml"},Ob={};var Z=function(){this.J="";this.Z=Qb};Z.prototype.u=!0;var Qb={};Z.prototype.A=function(){return this.J};Z.prototype.toString=function(){return"SafeScript{"+this.J+"}"};var Rb=function(a){if(a instanceof Z&&a.constructor===Z&&a.Z===Qb)return a.J;F("expected object of type SafeScript, got '"+a+"' of type "+u(a));return"type_error:SafeScript"};x("ng.safehtml.googSceHelper.isGoogHtmlType",function(a){return a&&a.u?!0:!1});x("ng.safehtml.googSceHelper.isCOMPILED",function(){return!0});x("ng.safehtml.googSceHelper.unwrapAny",function(a){if(a instanceof X)return Nb(a);if(a instanceof Y)return Pb(a);if(a instanceof U)return Eb(a);if(a instanceof W)return Lb(a);if(a instanceof Z)return Rb(a);throw Error();});
x("ng.safehtml.googSceHelper.unwrapGivenContext",function(a,b){if("html"==a)return Pb(b);if("resourceUrl"==a||"templateUrl"==a)return Nb(b);if("url"==a)return b instanceof X?Nb(b):Eb(b);if("css"==a)return Lb(b);if("js"==a)return Rb(b);throw Error();});var Sb=function(a){a.definePalette("henBlue",a.extendPalette("blue",{500:"4285F4"}));a.definePalette("henAccents",a.extendPalette("grey",{A200:"A1C2FA"}));a.theme("default").primaryPalette("henBlue").accentPalette("henAccents",{"hue-2":"600"})};Sb.$inject=["$mdThemingProvider"];angular.module("henhouse",[Ib.name,ja.name,"ngMaterial"]).config(Sb);
